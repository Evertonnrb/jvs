<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Pagina de lançamentos</title>
</h:head>
<h:body>
    <h:form>
        <h:commandLink value="Home" action="/teste" style="margin-left: 10px"/>
        <h:commandLink value="Usuarios" action="usuarios" style="margin-left: 10px"/>
        <h:commandLink value="Trocar usuario" action="/index" style="margin-left: 10px"/>
    </h:form>

    <h:form id="frmLancamento">

        <h:panelGrid columns="2">

            <f:facet name="header">
                <h:outputText value="Lancamento de notas"/>
            </f:facet>

            <h:outputText value="ID"/>
            <h:inputText value="#{lancamentoBean.lancamento.id}" readonly="true"/>

            <h:outputText value="Número da nota fiscal"/>
            <h:inputText value="#{lancamentoBean.lancamento.numeroNotaFiscal}"/>

            <h:outputText value="Empresa de origem"/>
            <h:inputText value="#{lancamentoBean.lancamento.empresaOrigem}"/>

            <h:outputText value="Empresa de destino"/>
            <h:inputText value="#{lancamentoBean.lancamento.empresaDestino}"/>

            <h:panelGrid columns="3">
                <h:commandButton value="Novo" action="#{lancamentoBean.novo}"/>
                <h:commandButton value="Cadastar nota" action="#{lancamentoBean.salvar}"/>
                <h:commandButton value="Limpar" type="reset"/>
            </h:panelGrid>

        </h:panelGrid>

        <h:dataTable value="#{lancamentoBean.lancamentos}" var="l" cellspacing="3" border="1">
            <h:column>
                <f:facet name="header">
                    <h:outputText value="ID"/>
                </f:facet>
                <h:outputText value="#{l.id}"/>
            </h:column>
            <h:column>
                <f:facet name="header">
                    <h:outputText value="Cod"/>
                </f:facet>
                <h:outputText value="#{l.numeroNotaFiscal}"/>
            </h:column>
            <h:column>
                <f:facet name="header">
                    <h:outputText value="Empresa de Origem"/>
                </f:facet>
                <h:outputText value="#{l.empresaOrigem}"/>
            </h:column>
            <h:column>
                <f:facet name="header">
                    <h:outputText value="Empresa de Destino"/>
                </f:facet>
                <h:outputText value="#{l.empresaDestino}"/>
            </h:column>
            <h:column rendered="#{usuarioBean.permiteAcesso('adm')}">
                <f:facet name="header">
                    <h:outputText value="Ações"/>
                </f:facet>
                <h:commandLink title="Editar">
                    <h:graphicImage value="/resources/img/edit.png" height="30" width="30"/>
                    <f:setPropertyActionListener value="#{l}" target="#{lancamentoBean.lancamento}"/>
                </h:commandLink>
                <h:commandLink title="remover" action="#{lancamentoBean.remover}">
                    <h:graphicImage value="/resources/img/lixo.png"  height="30" width="30"/>
                    <f:setPropertyActionListener value="#{l}" target="#{lancamentoBean.lancamento}"/>
                </h:commandLink>
            </h:column>
        </h:dataTable>

    </h:form>

</h:body>
</html>
